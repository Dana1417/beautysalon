<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم | Beauty Salon</title>

    <style>
        *{
            margin:0; padding:0; box-sizing:border-box;
            font-family:"Tajawal", sans-serif;
        }

        body{
            background:linear-gradient(180deg,#5A00E6,#8A2BFF,#C77AFF,#F3CBFF);
            min-height:100vh;
            padding:30px 18px 120px;
            color:#fff;
            display:flex;
            flex-direction:column;
            align-items:center;
            animation:fadeUp .6s ease;
        }

        @keyframes fadeUp{
            from{opacity:0;transform:translateY(25px);}
            to{opacity:1;transform:translateY(0);}
        }

        .page-wrap{
            width:100%;
            max-width:460px;
        }

        /* زر الرجوع */
        .back-btn{
            position:fixed;
            top:22px; right:22px;
            width:46px; height:46px;
            border-radius:50%;
            background:rgba(255,255,255,.24);
            display:flex; align-items:center; justify-content:center;
            color:#fff; font-size:20px;
            border:none; cursor:pointer;
            backdrop-filter:blur(8px);
            box-shadow:0 4px 14px rgba(0,0,0,.20);
            transition:.25s;
            z-index:10;
        }
        .back-btn:hover{transform:translateY(-2px);}

        /* الشعار */
        .logo-block{text-align:center; margin-top:70px;}
        .logo-icon svg{width:68px;height:68px;margin-bottom:12px;fill:#fff;}
        .title{font-size:28px;font-weight:800;}
        .sub{font-size:12px;opacity:.8;letter-spacing:3px;margin-top:-4px;}

        /* الترحيب */
        .welcome{text-align:center;margin:28px 0;}
        .welcome h3{font-size:23px;font-weight:800;}
        .welcome p{opacity:.92;font-size:15px;margin-top:4px;}

        /* زر حجز جديد */
        .new-book-btn{
            display:block; text-align:center;
            background:#3A0BFF;
            padding:14px 0;
            border-radius:16px;
            width:90%; color:#fff;
            font-size:16px; font-weight:800;
            margin:10px auto 35px;
            text-decoration:none;
            box-shadow:0 10px 22px rgba(0,0,0,.25);
            transition:.25s;
        }
        .new-book-btn:hover{transform:translateY(-3px);}

        /* بطاقة */
        .card{
            background:rgba(255,255,255,.22);
            backdrop-filter:blur(18px);
            padding:28px;
            border-radius:24px;
            margin-bottom:35px;
            box-shadow:0 8px 28px rgba(0,0,0,.22);
            width:100%;
        }

        .card-title{text-align:center;font-size:19px;font-weight:800;margin-bottom:20px;}

        .info-line{
            display:flex;
            justify-content:space-between;
            font-size:15px;
            margin-bottom:10px;
        }

        .btns-row{display:flex;gap:10px;margin-top:18px;}
        .btn-main, .btn-light, .btn-danger{
            flex:1; height:48px;
            border-radius:14px;
            font-size:15px;font-weight:800;
            border:none; cursor:pointer;
            transition:.25s;
        }
        .btn-main{background:#3A0BFF;color:#fff;}
        .btn-light{background:#fff;color:#3A0BFF;}
        .btn-danger{background:#ff4f6a;color:#fff;}

        .btn-main:hover, .btn-light:hover, .btn-danger:hover{
            transform:translateY(-2px);
        }

        .section-title{font-size:19px;font-weight:800;margin-bottom:18px;}

        .prev-card{
            background:rgba(255,255,255,.14);
            padding:22px;
            border-radius:20px;
            margin-bottom:20px;
            backdrop-filter:blur(14px);
        }
    </style>
</head>

<body>

    <button class="back-btn" onclick="history.back()">←</button>

    <div class="page-wrap">

        <!-- الشعار -->
        <div class="logo-block">
            <div class="logo-icon">
                <svg viewBox="0 0 64 64">
                    <path d="M32 4c-4 6-6 10-6 14s2 8 6 8 6-4 6-8-2-8-6-14zm0 20c-6-4-10-6-14-6s-8 2-8 6 4 6 8 6 8-2 14-6zm0 0c6-4 10-6 14-6s8 2 8 6-4 6-8 6-8-2-14-6zm0 4c-4 6-6 10-6 14s2 8 6 8 6-4 6-8-2-8-6-14z"/>
                </svg>
            </div>
            <div class="title">Beauty Salon</div>
            <div class="sub">BEAUTY</div>
        </div>

        <!-- الترحيب -->
        <div class="welcome">
            <h3>مرحباً يا {{ phone }} ✨</h3>
            <p>سعيدة بعودتك إلى Beauty Salon</p>
        </div>

        <!-- زر حجز جديد -->
        <a class="new-book-btn" href="{% url 'bookings:select_service' %}">حجز جديد</a>

        <!-- الحجز القادم -->
        {% if upcoming_booking %}
        <div class="card">
            <div class="card-title">حجزك القادم</div>

            <div class="info-line"><span>الخدمة:</span><span>{{ upcoming_booking.service }}</span></div>
            <div class="info-line"><span>التاريخ:</span><span>{{ upcoming_booking.date }}</span></div>
            <div class="info-line"><span>الوقت:</span><span>{{ upcoming_booking.time.time|time:"H:i" }}</span></div>
            <div class="info-line"><span>الحالة:</span><span>{{ upcoming_booking.get_status_display }}</span></div>

            <div class="btns-row">
                <a class="btn-light" style="text-align:center;line-height:48px;"
                   href="{% url 'bookings:edit_booking' upcoming_booking.id %}">تعديل الموعد</a>

                <a class="btn-danger" style="text-align:center;line-height:48px;"
                   href="{% url 'bookings:cancel_booking' upcoming_booking.id %}"
                   onclick="return confirm('هل أنتِ متأكدة من إلغاء الحجز؟');">إلغاء الحجز</a>
            </div>
        </div>
        {% else %}
            <div class="card" style="text-align:center;font-weight:700;">
                لا يوجد حجز قادم
            </div>
        {% endif %}

        <!-- حجوزات سابقة -->
        <div class="section-title">حجوزات سابقة</div>

        {% if previous_bookings %}
            {% for b in previous_bookings %}
                <div class="prev-card">
                    <div class="info-line"><span>{{ b.service }}</span><span>{{ b.date }}</span></div>
                    <div style="opacity:.8;">{{ b.get_status_display }}</div>
                </div>
            {% endfor %}
        {% else %}
            <p style="opacity:.9;font-size:15px;text-align:center;">لا توجد حجوزات سابقة</p>
        {% endif %}

    </div>

</body>

</html>
